<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Softball Team Manager</title>
    <link rel="stylesheet" href="styles.css">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
</head>
<body>
    <div class="container">
        <header>
            <h1>Softball Manager</h1>
            <nav class="nav-menu">
                <button class="nav-btn active" data-page="lineup">Lineup</button>
                <button class="nav-btn" data-page="stats">Scorecard</button>
                <button class="nav-btn" data-page="history">Stats</button>
            </nav>
        </header>
        
        <!-- Loading indicator -->
        <div id="loading-indicator" class="loading-indicator" style="display: none;">
            <div class="loading-bar"></div>
            <p>Loading last saved lineup...</p>
        </div>
        
        <!-- Lineup Page -->
        <div id="lineup-page" class="page active">
            <div class="available-players-section">
            <h2>Available Players</h2>
            <div id="player-list" class="player-list horizontal"></div>
            <div class="player-management">
                <input type="text" id="player-name-input" placeholder="Enter player name..." class="player-input">
                <button id="add-player-btn" class="manage-btn add">Add Player</button>
                <button id="remove-player-btn" class="manage-btn remove">Remove Player</button>
                <button id="copy-roster-btn" class="manage-btn copy">Copy Roster</button>
                <button id="reset-roster-btn" class="manage-btn reset">Reset Roster</button>
            </div>
        </div>
        
        <div class="main-content">
            <div class="field-section">
                <h2>Field Positions</h2>
                <div class="field-container">
                    <img src="baseball-field-png.png" alt="Baseball Field" class="field-image">
                    <div class="positions">
                        <div class="position" data-position="pitcher" style="top: 55%; left: 50%;">
                            <div class="drop-zone" data-position="pitcher">P</div>
                        </div>
                        <div class="position" data-position="catcher" style="top: 75%; left: 50%;">
                            <div class="drop-zone" data-position="catcher">C</div>
                        </div>
                        <div class="position" data-position="first-base" style="top: 55%; left: 70%;">
                            <div class="drop-zone" data-position="first-base">1B</div>
                        </div>
                        <div class="position" data-position="second-base" style="top: 40%; left: 65%;">
                            <div class="drop-zone" data-position="second-base">2B</div>
                        </div>
                        <div class="position" data-position="third-base" style="top: 55%; left: 30%;">
                            <div class="drop-zone" data-position="third-base">3B</div>
                        </div>
                        <div class="position" data-position="shortstop" style="top: 40%; left: 35%;">
                            <div class="drop-zone" data-position="shortstop">SS</div>
                        </div>
                        <div class="position" data-position="left-field" style="top: 20%; left: 20%;">
                            <div class="drop-zone" data-position="left-field">LF</div>
                        </div>
                        <div class="position" data-position="left-center" style="top: 17%; left: 35%;">
                            <div class="drop-zone" data-position="left-center">LC</div>
                        </div>
                        <div class="position" data-position="right-center" style="top: 17%; left: 65%;">
                            <div class="drop-zone" data-position="right-center">RC</div>
                        </div>
                        <div class="position" data-position="right-field" style="top: 20%; left: 80%;">
                            <div class="drop-zone" data-position="right-field">RF</div>
                        </div>
                        <!-- DH positions outside the field -->
                        <div class="position" data-position="dh1" style="top: 70%; left: 15%;">
                            <div class="drop-zone dh-position" data-position="dh1">DH1</div>
                        </div>
                        <div class="position" data-position="dh2" style="top: 80%; left: 15%;">
                            <div class="drop-zone dh-position" data-position="dh2">DH2</div>
                        </div>
                        <div class="position" data-position="dh3" style="top: 90%; left: 15%;">
                            <div class="drop-zone dh-position" data-position="dh3">DH3</div>
                        </div>
                    </div>
                </div>
                <div class="controls">
                    <button id="reset-field">Reset Field</button>
                    <button id="copy-lineup">Copy Lineup</button>
                    <button id="export-lineup">Export Lineup</button>
                    <button id="save-lineup" class="cloud-btn">Save Lineup</button>
                </div>
            </div>
            
            <div class="batting-lineup-section">
                <h2>Batting Lineup</h2>
                <div id="lineup-list" class="lineup-list drop-zone-list"></div>
            </div>
        </div>
        </div>
        
        <!-- Scorecard Page -->
        <div id="stats-page" class="page" style="display: none;">
            <div class="stats-container">
                <div class="stats-header">
                    <h2>Game Scorecard</h2>
                    <button class="help-btn" id="stats-help-btn">?</button>
                </div>
                
                <!-- Help tooltip -->
                <div id="stats-help" class="help-tooltip" style="display: none;">
                    <div class="help-content">
                        <h4>How to Record Game Stats</h4>
                        <ol>
                            <li><strong>Select Batter:</strong> Choose the current player from your batting lineup</li>
                            <li><strong>Set At-Bat #:</strong> Use + / - buttons or type the at-bat number</li>
                            <li><strong>Choose RBI:</strong> Select how many runs were batted in (0-4)</li>
                            <li><strong>Record Result:</strong> Click the at-bat result (Single, Double, Triple, HR, Sac Fly, Out)</li>
                            <li><strong>Did Player Score?</strong> This appears after recording - select Yes/No if the player scored</li>
                        </ol>
                        <h4>Key Features</h4>
                        <ul>
                            <li><strong>Status Indicator:</strong> Shows if at-bat is already recorded or new</li>
                            <li><strong>Baseball Diamond:</strong> Visual shows the hit result with base paths</li>
                            <li><strong>Edit Previous At-Bats:</strong> Click any at-bat in Today's Stats to review/edit</li>
                            <li><strong>Sacrifice Fly:</strong> Counts for RBI but NOT as an official at-bat for batting average</li>
                        </ul>
                        <p><strong>Tips:</strong></p>
                        <ul>
                            <li>RBI = Runs Batted In (teammates who scored because of this hit)</li>
                            <li>Runs = Whether THIS batter crossed home plate</li>
                            <li>You can update runs/RBI after recording by selecting the at-bat again</li>
                        </ul>
                    </div>
                </div>
                
                <div class="stats-content">
                    <div class="current-batter-section">
                        <h3>Current At Bat</h3>
                        <div class="at-bat-info">
                            <label>Batter:</label>
                            <select id="current-batter" class="batter-select">
                                <option value="">Select a player...</option>
                            </select>
                            
                            <label>At Bat #:</label>
                            <div class="at-bat-number-wrapper">
                                <div class="at-bat-number-container">
                                    <button type="button" class="at-bat-btn at-bat-prev" id="at-bat-prev">âˆ’</button>
                                    <input type="number" id="at-bat-number" class="at-bat-input" min="1" value="1">
                                    <button type="button" class="at-bat-btn at-bat-next" id="at-bat-next">+</button>
                                </div>
                                <span class="at-bat-status" id="at-bat-status"></span>
                            </div>
                        </div>
                        
                        <div class="rbi-section">
                            <label>RBI (Runs Batted In):</label>
                            <div class="rbi-buttons">
                                <button class="rbi-btn active" data-rbi="0">0</button>
                                <button class="rbi-btn" data-rbi="1">1</button>
                                <button class="rbi-btn" data-rbi="2">2</button>
                                <button class="rbi-btn" data-rbi="3">3</button>
                                <button class="rbi-btn" data-rbi="4">4</button>
                            </div>
                        </div>
                        
                        <div class="at-bat-results">
                            <h4>At-Bat Result:</h4>
                            <div class="result-buttons">
                                <button class="result-btn" data-result="single">Single</button>
                                <button class="result-btn" data-result="double">Double</button>
                                <button class="result-btn" data-result="triple">Triple</button>
                                <button class="result-btn" data-result="homerun">Home Run</button>
                                <button class="result-btn" data-result="sacrifice-fly">Sacrifice Fly</button>
                                <button class="result-btn" data-result="out">Out</button>
                            </div>
                            
                            <!-- Baseball Diamond Visualization -->
                            <div class="diamond-result-container" style="display: none;">
                                <svg class="diamond-svg" viewBox="0 0 300 300" width="300" height="300">
                                    <!-- Diamond shape -->
                                    <path d="M150,50 L250,150 L150,250 L50,150 Z" fill="#2a5434" stroke="#fff" stroke-width="2"/>
                                    
                                    <!-- Bases -->
                                    <rect x="235" y="135" width="30" height="30" fill="#fff" stroke="#000" stroke-width="2" class="base first-base"/>
                                    <rect x="135" y="35" width="30" height="30" fill="#fff" stroke="#000" stroke-width="2" class="base second-base"/>
                                    <rect x="35" y="135" width="30" height="30" fill="#fff" stroke="#000" stroke-width="2" class="base third-base"/>
                                    <path d="M150,235 L165,250 L135,250 Z" fill="#fff" stroke="#000" stroke-width="2" class="base home-plate"/>
                                    
                                    <!-- Runner indicator -->
                                    <circle class="runner" cx="150" cy="242" r="8" fill="#ff6b6b" stroke="#000" stroke-width="2" style="display: none;"/>
                                    
                                    <!-- Base paths -->
                                    <path class="base-path single-path" d="M150,242 L250,150" stroke="#ffd700" stroke-width="4" fill="none" stroke-dasharray="5,5" style="display: none;"/>
                                    <path class="base-path double-path" d="M150,242 L250,150 L150,50" stroke="#ffd700" stroke-width="4" fill="none" stroke-dasharray="5,5" style="display: none;"/>
                                    <path class="base-path triple-path" d="M150,242 L250,150 L150,50 L50,150" stroke="#ffd700" stroke-width="4" fill="none" stroke-dasharray="5,5" style="display: none;"/>
                                    <path class="base-path homerun-path" d="M150,242 L250,150 L150,50 L50,150 L150,242" stroke="#ffd700" stroke-width="4" fill="none" stroke-dasharray="5,5" style="display: none;"/>
                                    
                                    <!-- Result text -->
                                    <text x="150" y="155" text-anchor="middle" font-size="20" font-weight="bold" fill="#fff" class="result-text"></text>
                                </svg>
                            </div>
                        </div>
                        
                        <div class="runs-section" style="display: none;">
                            <label>Did This Player Score?</label>
                            <div class="runs-buttons">
                                <button class="runs-btn active" data-runs="0">No</button>
                                <button class="runs-btn" data-runs="1">Yes</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="game-stats-section">
                        <h3>Today's Stats</h3>
                        <div id="game-stats-display" class="stats-display">
                            <!-- Stats will be displayed here -->
                        </div>
                        
                        <div class="stats-controls">
                            <button id="save-stats" class="cloud-btn">Save Stats and End Game</button>
                            <button id="clear-stats">Clear Today's Stats</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Stats Page -->
        <div id="history-page" class="page" style="display: none;">
            <div class="history-container">
                <h2>Player Statistics</h2>
                
                <div class="history-controls">
                    <div class="filter-section">
                        <label>Filter by Player:</label>
                        <select id="player-filter" class="filter-select">
                            <option value="">All Players</option>
                        </select>
                        
                        <label>Filter by Date Range:</label>
                        <input type="date" id="date-from" class="date-input">
                        <span> to </span>
                        <input type="date" id="date-to" class="date-input">
                        
                        <button id="refresh-history" class="manage-btn copy">Refresh Data</button>
                    </div>
                </div>
                
                <div class="history-content">
                    <!-- Summary Statistics -->
                    <div class="summary-stats">
                        <h3>Season Summary</h3>
                        <div id="summary-display" class="summary-grid">
                            <!-- Summary stats will be displayed here -->
                        </div>
                    </div>
                    
                    <!-- Detailed Player Stats -->
                    <div class="player-stats-table">
                        <h3>Player Statistics</h3>
                        <div id="player-table-container">
                            <table id="player-stats-table" class="stats-table">
                                <thead>
                                    <tr>
                                        <th>Player</th>
                                        <th>Games</th>
                                        <th>AB</th>
                                        <th>H</th>
                                        <th>AVG</th>
                                        <th>R</th>
                                        <th>RBI</th>
                                        <th>1B</th>
                                        <th>2B</th>
                                        <th>3B</th>
                                        <th>HR</th>
                                        <th>OUT</th>
                                    </tr>
                                </thead>
                                <tbody id="player-stats-body">
                                    <!-- Player stats will be populated here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- Game by Game Details -->
                    <div class="game-details">
                        <h3>Game Details</h3>
                        <div id="game-details-container">
                            <!-- Game details will be displayed here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="script.js"></script>
</body>
</html>